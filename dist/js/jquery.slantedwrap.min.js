jQuery.fn.reverse=[].reverse,jQuery.fn.slantedwrap=function(){var a=this;$.fn.slantedwrap.init=function(){a.each(function(){var a=$(this).find(".slantedwrap-overlay").height(),b=$(this).find(".slantedwrap-overlay").width(),c=$('<canvas height="'+a+'" width="'+b+'" />');$(this).find(".slantedwrap-overlay").append(c)}),$(window).resize(function(){$.fn.slantedwrap.draw()}),$.fn.slantedwrap.draw()},$.fn.slantedwrap.draw=function(){a.each(function(){var a=$(this).data("breakpoint")||768,b=$(this).data("halign")||"left",c=$(this).data("offset")||.1,d=$(this).data("valign")||"top",e=$(this).data("wrapstart")||1,f=$(this).data("wrappadding")||16,g=$(this).find(".slantedwrap-overlay").width();if(a>g)$(this).find(".slantedwrap-content").show(),$(this).find("canvas").hide();else{$(this).find(".slantedwrap-content").hide(),$(this).find("canvas").show();var h=$(this).find(".slantedwrap-overlay").height(),i=h/(e*g-2*f),j=$(this).find("canvas");j.attr("height",h),j.attr("width",g);var k=j[0].getContext("2d");k.clearRect(0,0,g,h),k.globalAlpha=.2,k.fillStyle="#000000",k.beginPath(),"left"===b?(k.moveTo(0,"top"===d?0:h),k.lineTo(e*g,"top"===d?0:h),k.lineTo(g*c,"top"===d?h:0),k.lineTo(0,"top"===d?h:0),k.lineTo(0,"top"===d?0:h)):(k.moveTo(g,"top"===d?0:h),k.lineTo((1-e)*g,"top"===d?0:h),k.lineTo(g*(1-c),"top"===d?h:0),k.lineTo(g,"top"===d?h:0),k.lineTo(g,"top"===d?0:h)),k.closePath(),k.fill(),k.globalAlpha=1;var l=8,m="left"===b?l:g-l,n=h/i;if("top"===d){var o=0;$(this).find(".slantedwrap-content h3, .slantedwrap-content p").each(function(){k.fillStyle=$(this).css("color"),k.font=$(this).css("font-size")+" "+$(this).detectFont(),k.textAlign=b;var a=1.2*parseFloat($(this).css("font-size"));o+=a,n=(h-o)/i;for(var c=$(this).text().trim(),d=c.split(" "),e="",f=0;f<d.length;f++){var g=(e?e+" ":"")+d[f],j=k.measureText(g),l=j.width;if(l>n&&f>0){if(-1===e.indexOf(" ")&&f!==d.length-1){k.fillText(String.fromCharCode(8230),m,o+a);break}k.fillText(e,m,o),e=d[f],o+=a,n=(h-o)/i}else e=g}k.fillText(e,m,o),o+=8})}else{var o=h;$(this).find(".slantedwrap-content h3, .slantedwrap-content p").reverse().each(function(){k.fillStyle=$(this).css("color"),k.font=$(this).css("font-size")+" "+$(this).detectFont(),k.textAlign=b;var a=1.2*parseFloat($(this).css("font-size"));o-=a,n=o/i;for(var c=$(this).text(),d=c.split(" "),e="",f=d.length-1;f>=0;f--){var g=d[f]+(e.length?" "+e:""),h=k.measureText(g),j=h.width;j>n&&f!==d.length-1?(k.fillText(e,m,o),e=d[f],o-=a,n=o/i):e=g}k.fillText(e,m,o)})}}})},$.fn.slantedwrap.init()};